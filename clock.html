<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>
        Clock - by Lokesh
    </title>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css' rel='stylesheet'
        integrity='sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB' crossorigin='anonymous'>
    <link href='https://fonts.cdnfonts.com/css/open-sans' rel='stylesheet'>
    <link href='https://fonts.cdnfonts.com/css/oswald-4' rel='stylesheet'>
    <style>
        body {
            font-family: monospace;
            font-size: 18px;
            background: linear-gradient(purple, rgb(56, 19, 51), black);
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
        }

        .main-container {
            width: 500px;
            margin: 50px auto;
            padding: 20px;
            /* background-color: bisque; */

            border-radius: 10px;
        }

        .form-control {
            box-shadow: none !important;
        }

        .form-control:focus {
            box-shadow: 0 0 5px purple !important;
            border: 1px solid purple;
        }

        .timer {
            box-shadow: 0 0 10px purple;
            padding: 20px;
            background-color: whitesmoke;
            border-radius: 5px;
        }


        @media screen and (max-width:768px) {
            body {
                padding: 10px;
            }

            .main-container {
                width: 100%;
            }
        }
    </style>
</head>

<body>

    <div class="main-container">
        <div class="clock text-center">
            <!-- <h1>Current Time: </h1> -->
            <h1 id="time" style="color: white; font-weight: 700;"></h1>
        </div>

        <div class="timer text-center mt-5">
            <h3>Timer</h3>
            <label for="">Enter time in seconds:</label>
            <input type="number" name="timer_time" id="timer_time" class="form-control">
            <span class="" style="font-size: 12px;">press "Enter"/ â†µ to start timer or click on Start</span>
            <div class="text-center">
                <button type="submit" id="startBtn" class="btn btn-dark m-3">start</button>
            </div>
            <h2 id="timecounter"></h2>
            <p id="msg"></p>
        </div>
    </div>

    <script>
        setInterval(clockFunc, 1000);

        function clockFunc() {
            let date = new Date();
            document.getElementById("time").innerHTML = "Current Time: " + date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();

        }

        const timerTime = document.getElementById("timer_time");
        const startBtn = document.getElementById("startBtn");
        const timeCounter = document.getElementById("timecounter");
        const msg = document.getElementById("msg");

        let timer = 0;
        let intervalId = null;

        function startTimer() {
            if (!timerTime.value || timerTime.value < 0) return;

            if (intervalId) clearInterval(intervalId);

            timer = Number(timerTime.value);
            startBtn.disabled = true;
            msg.textContent = "";

            intervalId = setInterval(() => {
                if (timer >= 0) {
                    timeCounter.textContent = `Time Remaining: ${timer}`;
                    timer--;
                }
                else {
                    clearInterval(intervalId);
                    intervalId = null;
                    timeCounter.textContent = "";
                    msg.textContent = "Timer has stopped";
                    startBtn.disabled = false;
                }
            }, 1000);
            console.log(intervalId);

            timerTime.value = "";
        }

        startBtn.addEventListener("click", startTimer);

        timerTime.addEventListener("keydown", (event) => {
            if (event.key === "Enter") {
                startTimer();
            }
        });

    </script>
</body>

</html>